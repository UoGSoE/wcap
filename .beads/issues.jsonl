{"id":"wcap-1a6","title":"Colour coding for plan entry cards by availability status","description":"Add visual colour coding to plan entry cards based on availability status (Not Available, Remote, Onsite) to make the planner grid more scannable at a glance.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-07T15:07:58.614845Z","created_by":"billy","updated_at":"2026-01-07T16:30:04.594764Z","closed_at":"2026-01-07T16:30:04.594764Z","close_reason":"Not needed - availability status is clear enough without additional colour coding","labels":["nice-to-have"]}
{"id":"wcap-4ua","title":"Seed 6 months of historical plan data for demos","description":"Currently TestDataSeeder only creates 2 weeks of plan entry data. For demoing trends, heatmap aggregation, and stats over time, we need more historical data.\n\n## Requirements\n- Add a CONST to TestDataSeeder to control the historical period (default ~6 months)\n- Generate realistic plan entries going back that far\n- Keep the existing bias towards home locations (80%)\n- Mix of ONSITE/REMOTE/NOT_AVAILABLE statuses\n\n## Why\n- Trends chart looks empty with only 2 weeks\n- Weekly aggregation in heatmap needs 5+ weeks to trigger\n- Stats over longer periods are more meaningful for demos","status":"closed","priority":2,"issue_type":"feature","assignee":"billy","created_at":"2026-01-07T16:33:43.807929Z","created_by":"billy","updated_at":"2026-01-07T16:35:48.598993Z","closed_at":"2026-01-07T16:35:48.598993Z","close_reason":"Added HISTORICAL_WEEKS constant (default 26 = ~6 months). Seeder now generates entries from that far back with realistic mix: 70% ONSITE, 20% REMOTE, 10% NOT_AVAILABLE. Keeps 80% home location bias for ONSITE entries."}
{"id":"wcap-det","title":"Refactor inline @php blocks out of report blade templates","description":"Move inline @php logic from blade templates into the service layer data structures.\n\n## Files affected\n- resources/views/livewire/manager-report.blade.php\n- resources/views/livewire/occupancy-report.blade.php\n- app/Services/ManagerReportService.php\n- app/Services/OccupancyReportService.php\n\n## Specific changes needed\n\n### 1. manager-report.blade.php (line 129-131)\nCurrent inline code:\n```php\n@php\n    $showDanger = empty($location['members']) \u0026\u0026 $location['is_physical'];\n@endphp\n```\n**Fix:** Add `show_danger` key to each location array in `ManagerReportService` when building `locationDays`.\n\n### 2. occupancy-report.blade.php (lines 122-128)\nCurrent inline code:\n```php\n@php\n    $cellClass = match(true) {\n        $dayData['utilization_pct'] \u003e= 80 =\u003e 'bg-emerald-200 dark:bg-emerald-800',\n        $dayData['utilization_pct'] \u003e= 50 =\u003e 'bg-emerald-100 dark:bg-emerald-900',\n        $dayData['utilization_pct'] \u003e 0 =\u003e 'bg-amber-100 dark:bg-amber-900/50',\n        default =\u003e 'bg-zinc-100 dark:bg-zinc-800',\n    };\n@endphp\n```\n**Fix:** Add `cell_class` key to each day entry in `OccupancyReportService` when building `periodMatrix`.\n\n## Goal\nKeep blade templates 'dumb' - they should just render data, not compute/transform it.","status":"closed","priority":2,"issue_type":"chore","assignee":"ohffs","created_at":"2026-01-08T17:00:36.933136Z","created_by":"ohffs","updated_at":"2026-01-08T17:11:14.051424Z","closed_at":"2026-01-08T17:11:14.051424Z","close_reason":"Refactored both inline @php blocks into service layer","labels":["refactor","templates"]}
{"id":"wcap-dou","title":"Only show api information and crud to managers and admin users","description":"Originally staff were going to be able to use the API to update their own plan entry entries.  But now this is the job of their manager.  So we should hide the current card on the profile template unless the user is a manager or admin.\n\nThere is a blade `if` directive in the AppServiceProvider that will help.\n","status":"closed","priority":2,"issue_type":"task","assignee":"ohffs","created_at":"2026-01-08T17:39:10.445082Z","created_by":"billy","updated_at":"2026-01-09T10:43:28.369231Z","closed_at":"2026-01-09T10:43:28.369231Z","close_reason":"API Access section now only visible to managers and admins using @adminOrManager directive"}
{"id":"wcap-n7u","title":"Add average line to occupancy trends chart","description":"Add an 'Average' line to the Trends tab chart in the Occupancy Report. This gives users a quick visual of overall office utilization across all locations. Implementation: 1) Calculate average utilization in buildChartData() method, 2) Add chart line/point/tooltip/legend in template with neutral grey hex colour.","status":"closed","priority":2,"issue_type":"feature","assignee":"ohffs","created_at":"2026-01-08T09:53:37.211722Z","created_by":"ohffs","updated_at":"2026-01-08T10:01:32.522231Z","closed_at":"2026-01-08T10:01:32.522231Z","close_reason":"Implemented and tested - average line reflects selected locations only"}
{"id":"wcap-ng2","title":"Add Excel export for team plan entries","description":"Export team plan entries in the same format as import (Email, Date, Location, Note, Availability). Covers 14-day period, all team members, with blank rows for missing entries.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T15:13:41.094717Z","created_by":"ohffs","updated_at":"2026-01-08T16:13:00.397969Z","closed_at":"2026-01-08T16:13:00.397969Z","close_reason":"Export feature complete with round-trip import support and user default fallbacks"}
{"id":"wcap-opu","title":"Filtering options for manager reports","description":"Add filtering options to manager reports to show only remote workers, only onsite workers, etc. Would help managers quickly see coverage for specific working patterns.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-07T15:08:03.436451Z","created_by":"billy","updated_at":"2026-01-07T16:30:04.294759Z","closed_at":"2026-01-07T16:30:04.294759Z","close_reason":"Not needed - current report views provide sufficient filtering capability","labels":["nice-to-have"]}
{"id":"wcap-qj4","title":"Occupancy Report Enhancements","description":"Follow-on work to enhance the Office Occupancy Report after the initial implementation. These enhancements will help managers better share and analyse occupancy data.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-07T15:07:19.475938Z","created_by":"billy","updated_at":"2026-01-07T16:30:03.924766Z","closed_at":"2026-01-07T16:30:03.924766Z","close_reason":"All planned enhancements complete: Excel export and Trends chart implemented"}
{"id":"wcap-qj4.1","title":"Excel export for occupancy report","description":"Add Excel export capability so managers can share occupancy data with college management.\n\n## Open Question\nNeed to decide on export granularity from the user's perspective:\n- **Export current**: Export what's currently displayed (respects aggregation mode - daily or weekly averages)\n- **Export detailed**: Export all underlying daily data for post-processing\n\nConsider implementing as a flux:dropdown with both options.\n\n## Context\nCollege management wants evidence of office utilisation. Export makes it easy to share snapshots in meetings/emails.","status":"closed","priority":2,"issue_type":"feature","assignee":"billy","created_at":"2026-01-07T15:07:28.000358Z","created_by":"billy","updated_at":"2026-01-07T15:23:26.756423Z","closed_at":"2026-01-07T15:23:26.756423Z","close_reason":"Implemented Excel export with dropdown offering 'Export current view' and 'Export detailed (daily)' options","dependencies":[{"issue_id":"wcap-qj4.1","depends_on_id":"wcap-qj4","type":"parent-child","created_at":"2026-01-07T15:07:28.002148Z","created_by":"ohffs"}]}
{"id":"wcap-qj4.2","title":"Trend analysis with charts","description":"Add visual trend analysis using flux:chart components to help managers identify patterns over longer periods.\n\n## Potential Charts\n- Occupancy over time (line chart per location)\n- Average utilisation comparison across locations (bar chart)\n- Peak vs average occupancy trends\n\n## Context\nCurrently the heatmap auto-aggregates to weekly for large date ranges, but visual charts would make trends more immediately apparent.\n\n## User thoughts\nI think this could be it's own new tab on the occupancy page.  If we re-use the existing date range from the heatmap and stats tabs - but also add a `\u003cflux:checkbox.group wire:model=\"locations\" label=\"Locations\" variant=\"pills\"\u003e` (it's a nice flux component visually) which lets the user select/unselect specific locations (we should include them all as 'checked' by default).  \n\nFlux supports a multi-line chart.  An example from their docs is :\n\n```blade\n\u003cflux:chart wire:model=\"data\"\u003e\n    \u003cflux:chart.viewport class=\"min-h-[20rem]\" \u003e\n        \u003cflux:chart.svg\u003e\n            \u003cflux:chart.line field=\"twitter\" class=\"text-blue-500\" curve=\"none\" /\u003e\n            \u003cflux:chart.point field=\"twitter\" class=\"text-blue-500\" r=\"6\" stroke-width=\"3\" /\u003e\n            \u003cflux:chart.line field=\"facebook\" class=\"text-red-500\" curve=\"none\" /\u003e\n            \u003cflux:chart.point field=\"facebook\" class=\"text-red-500\" r=\"6\" stroke-width=\"3\" /\u003e\n            \u003cflux:chart.line field=\"instagram\" class=\"text-green-500\" curve=\"none\" /\u003e\n            \u003cflux:chart.point field=\"instagram\" class=\"text-green-500\" r=\"6\" stroke-width=\"3\" /\u003e\n\n            \u003cflux:chart.axis axis=\"x\" field=\"date\"\u003e\n                \u003cflux:chart.axis.tick /\u003e\n                \u003cflux:chart.axis.line /\u003e\n            \u003c/flux:chart.axis\u003e\n\n            \u003cflux:chart.axis axis=\"y\" tick-start=\"0\" tick-end=\"1\" :format=\"[\n                'style' =\u003e 'percent',\n                'minimumFractionDigits' =\u003e 0,\n                'maximumFractionDigits' =\u003e 0,\n            ]\"\u003e\n                \u003cflux:chart.axis.grid /\u003e\n                \u003cflux:chart.axis.tick /\u003e\n            \u003c/flux:chart.axis\u003e\n        \u003c/flux:chart.svg\u003e\n    \u003c/flux:chart.viewport\u003e\n\n    \u003cdiv class=\"flex justify-center gap-4 pt-4\"\u003e\n        \u003cflux:chart.legend label=\"Instagram\"\u003e\n            \u003cflux:chart.legend.indicator class=\"bg-green-400\" /\u003e\n        \u003c/flux:chart.legend\u003e\n\n        \u003cflux:chart.legend label=\"Twitter\"\u003e\n            \u003cflux:chart.legend.indicator class=\"bg-blue-400\" /\u003e\n        \u003c/flux:chart.legend\u003e\n\n        \u003cflux:chart.legend label=\"Facebook\"\u003e\n            \u003cflux:chart.legend.indicator class=\"bg-red-400\" /\u003e\n        \u003c/flux:chart.legend\u003e\n    \u003c/div\u003e\n\u003c/flux:chart\u003e\n```\n\nAnd this is an example of the data structure:\n```php\nuse Livewire\\Component;\n\nclass Dashboard extends Component\n{\n    public array $data = [\n        ['date' =\u003e '2026-01-07', 'visitors' =\u003e 267],\n        ['date' =\u003e '2026-01-06', 'visitors' =\u003e 259],\n        ['date' =\u003e '2026-01-05', 'visitors' =\u003e 269],\n        // ...\n    ];\n}\n```\n\nThe `field='visitors'` is how we map the location name for each line.  So in our case we would have multiple entries for the same data just with the location name as the field.\n\n","status":"closed","priority":2,"issue_type":"feature","assignee":"billy","created_at":"2026-01-07T15:07:33.978979Z","created_by":"billy","updated_at":"2026-01-07T16:27:47.133183Z","closed_at":"2026-01-07T16:27:47.133183Z","close_reason":"Implemented Trends tab with utilisation % chart (multi-line, location filter, inline hex colours). Updated REMOTE_REFACTOR.md to be a developer journal pointing to Beads for issue tracking.","dependencies":[{"issue_id":"wcap-qj4.2","depends_on_id":"wcap-qj4","type":"parent-child","created_at":"2026-01-07T15:07:33.979802Z","created_by":"ohffs"}]}
{"id":"wcap-zqq","title":"Allow managers to edit staff default values","description":"We should create a new component to allow managers to edit the defaults which staff can current update for their own account via app/Livewire/Profile.php.\n\nMy first thought is on the ManageTeamEntries component - when a manager is editing a team-members entry we show a button for 'Edit {{ name of team member }} defaults'.  That opens a flux:modal flyout variant (please use the boost docs tool to check the syntax) with a form to edit the details.  This is the primary page managers work on - so keeping the UX smooth in one place would be good.\n\n","status":"in_progress","priority":2,"issue_type":"task","assignee":"ohffs","created_at":"2026-01-08T17:36:45.656331Z","created_by":"billy","updated_at":"2026-01-09T10:48:07.41585Z"}
